---
import type { ImageMetadata } from 'astro';
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import PhotoGallery from '~/components/widgets/PhotoGallery.astro';

const metadata = {
  title: 'Galerie foto - Școala Primară Teofil',
  description: 'Momente speciale din viața Școlii Primare Teofil.',
};

// Import all images from the scoala-primara gallery
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/images/galerie/scoala-primara/*.jpg', {
  eager: true,
});

// Filter out thumbnails and prepare gallery images
const galleryImages = Object.entries(images)
  .filter(([path]) => !path.includes('-150x150'))
  .map(([path, module]) => ({
    src: module.default,
    alt: path.split('/').pop()?.replace('.jpg', '').replace(/-/g, ' ') || 'Școala Primară Teofil',
  }))
  .sort((a, b) => a.alt.localeCompare(b.alt));
---

<Layout metadata={metadata}>
  <HeroText tagline="Școala Primară" title="Galerie foto" subtitle="Momente speciale din viața școlii" />

  <PhotoGallery
    title="Albumul nostru foto"
    subtitle="Descoperă momente speciale din viața Școlii Primare Teofil - activități de învățare, proiecte, sărbători și realizările elevilor noștri."
    images={galleryImages}
    columns={3}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-slate-800"></div>
    </Fragment>
  </PhotoGallery>
</Layout>
