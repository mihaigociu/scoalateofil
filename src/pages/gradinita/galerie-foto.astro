---
import type { ImageMetadata } from 'astro';
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import PhotoGallery from '~/components/widgets/PhotoGallery.astro';

const metadata = {
  title: 'Galerie foto - Grădinița Teofil',
  description: 'Momente speciale din viața Grădiniței Teofil.',
};

// Import all images from the gradinita gallery
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/images/galerie/gradinita/*.jpg', {
  eager: true,
});

// Filter out thumbnails and prepare gallery images
const galleryImages = Object.entries(images)
  .filter(([path]) => !path.includes('-150x150'))
  .map(([path, module]) => ({
    src: module.default,
    alt: path.split('/').pop()?.replace('.jpg', '').replace(/-/g, ' ') || 'Grădinița Teofil',
  }))
  .sort((a, b) => a.alt.localeCompare(b.alt));
---

<Layout metadata={metadata}>
  <HeroText tagline="Grădiniță" title="Galerie foto" subtitle="Momente speciale din viața grădiniței" />

  <PhotoGallery
    title="Albumul nostru foto"
    subtitle="Descoperă momente speciale din viața Grădiniței Teofil - activități zilnice, sărbători, evenimente și zâmbetele copiilor noștri."
    images={galleryImages}
    columns={3}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-slate-800"></div>
    </Fragment>
  </PhotoGallery>
</Layout>
